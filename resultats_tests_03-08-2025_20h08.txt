test_author_can_update_comment (tests.CommentPermissionsTest.test_author_can_update_comment) ... ok
test_contributor_can_see_comment (tests.CommentPermissionsTest.test_contributor_can_see_comment) ... ERROR
test_contributor_cannot_update_comment (tests.CommentPermissionsTest.test_contributor_cannot_update_comment) ... ok
test_stranger_cannot_see_comment (tests.CommentPermissionsTest.test_stranger_cannot_see_comment) ... ERROR
test_author_can_update_issue (tests.IssuePermissionsTest.test_author_can_update_issue) ... ok
test_contributor_can_list_issues (tests.IssuePermissionsTest.test_contributor_can_list_issues) ... ok
test_contributor_can_view_specific_issue (tests.IssuePermissionsTest.test_contributor_can_view_specific_issue) ... ok
test_author_can_update_project (tests.ProjectPermissionsTest.test_author_can_update_project) ... ok
test_contributor_can_view_project (tests.ProjectPermissionsTest.test_contributor_can_view_project) ... ok
test_contributor_cannot_update_project (tests.ProjectPermissionsTest.test_contributor_cannot_update_project) ... ok
test_stranger_cannot_view_project (tests.ProjectPermissionsTest.test_stranger_cannot_view_project) ... FAIL
test_cannot_create_user_with_age_under_15 (tests.UserCreationTest.test_cannot_create_user_with_age_under_15) ... ok

======================================================================
ERROR: test_contributor_can_see_comment (tests.CommentPermissionsTest.test_contributor_can_see_comment)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\andre\Desktop\RESTFUL\support_api\tests.py", line 80, in test_contributor_can_see_comment
    response = self.client_contributor.get(url)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\test.py", line 292, in get
    response = super().get(path, data=data, **extra)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\test.py", line 209, in get
    return self.generic('GET', path, **r)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\test.py", line 237, in generic
    return super().generic(
           ~~~~~~~~~~~~~~~^
        method, path, data, content_type, secure, **extra)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\django\test\client.py", line 671, in generic
    return self.request(**r)
           ~~~~~~~~~~~~^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\test.py", line 289, in request
    return super().request(**kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\test.py", line 241, in request
    request = super().request(**kwargs)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\django\test\client.py", line 1087, in request
    self.check_exception(response)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\django\test\client.py", line 802, in check_exception
    raise exc_value
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\views.py", line 486, in raise_uncaught_exception
    raise exc
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\mixins.py", line 54, in retrieve
    instance = self.get_object()
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\generics.py", line 103, in get_object
    self.check_object_permissions(self.request, obj)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\venv\Lib\site-packages\rest_framework\views.py", line 351, in check_object_permissions
    if not permission.has_object_permission(request, self, obj):
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\andre\Desktop\RESTFUL\support_api\permissions.py", line 10, in has_object_permission
    return obj.project.contributors.filter(user=request.user).exists()  or obj.author == request.user
           ^^^^^^^^^^^
AttributeError: 'Comment' object has no attribute 'project'

======================================================================
ERROR: test_stranger_cannot_see_comment (tests.CommentPermissionsTest.test_stranger_cannot_see_comment)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\andre\Desktop\RESTFUL\support_api\tests.py", line 72, in test_stranger_cannot_see_comment
    response = self.client.get(f'/api/comments/{self.comment.id}/', **self.stranger_auth_header)
                                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CommentPermissionsTest' object has no attribute 'stranger_auth_header'

======================================================================
FAIL: test_stranger_cannot_view_project (tests.ProjectPermissionsTest.test_stranger_cannot_view_project)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\andre\Desktop\RESTFUL\support_api\tests.py", line 184, in test_stranger_cannot_view_project
    self.assertEqual(response.status_code, 403)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: 404 != 403

----------------------------------------------------------------------
Ran 12 tests in 18.022s

FAILED (failures=1, errors=2)


Rapport de couverture:
Name                                 Stmts   Miss  Cover
--------------------------------------------------------
rest\urls.py                             6      0   100%
support_api\migrations\__init__.py       0      0   100%
support_api\permissions.py              54     13    76%
support_api\serializers.py              60      7    88%
support_api\tests.py                   146      4    97%
support_api\urls.py                     10      0   100%
support_api\views.py                    79     20    75%
--------------------------------------------------------
TOTAL                                  355     44    88%
